import requests
import json
url = "http://camonitor.uct.ac.za/obs-api/event/?start=2018-04-01"
myResponse = requests.get(url)
myResponse
myResponse.OK
myResponse.ok
jData = json.loads(myResponse.content)
for key in jData:
        print key + " : " + jData[key]
for key in jData:
  print key
for key in jData:
    print key + " : " + jData[key]
for line in jData:
   for key in line:
      print key + " : " + line[key]
for line in jData:
 print line
for line in jData:
  print 1
print("The response contains {0} properties".format(len(jData)))
len.JData
len(JData)
len(jData)
len(jData[0])
for line in jData:
   for key in line:
      print key
for line in jData:
   for key in line:
      print key +": "+ line[key]
jData[0]
jData[0]['type']
for line in jData:
   for k in jData[line]:
      print (k +": "+ jData[line][k])
for line in jData:
  print line
for line in jData:
   print (len(line))
for line in jData:
   for k in line:
      print k
for line in jData:
   for k in line:
      print line[k]
for line in jData:
   for k in line:
      print k +": "+ str(line[k])

   for k in line:
      print k +": "+ str(line[k])
   print "-----------------------------------"
from collections import namedtuple
l = []
for line in jData:
   l.append(namedtuple(e.keys())(*e.values())
)
for line in jData:
   l.append(namedtuple(line.keys())(*line.values())
)
   l.append('',namedtuple(line.keys())(*line.values()))
for line in jData:
   l.append('',namedtuple(line.keys())(*line.values()))
for line in jData:
   l.append(namedtuple('',line.keys())(*line.values()))
for line in jData:
   l.append(namedtuple('X',line.keys())(*line.values()))
l
l[0]
l[0].body
l[0].organizer
l[0].organizer.name
l[0].organizer.emailAddress
l[0].organizer
x = json.loads(myResponse.content, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))
x
x[0]
x[0].organizer
x[0].organizer.name
x[0].organizer.emailAddress
x[0].organizer.emailAddress.name
print x[0].organizer.emailAddress.name
import readline
for i in range(readline.get_current_history_length()):
    print readline.get_history_item(i + 1)


pip install pytz tzlocal



>>> from dateutil.parser import parse
>>> from datetime import datetime
>>> dt = parse("2018-04-16T10:30:00.0000000Z")
>>> from tzlocal import get_localzone
>>> print(dt.astimezone(get_localzone()))
2018-04-16 12:30:00+02:00


-----

from collections import namedtuple
import requests
import json
url = "http://camonitor.uct.ac.za/obs-api/event/?start=2018-04-01"

myResponse = requests.get(url + now.strftime("%Y-%m-%d"))

if (myResponse.ok):
  x = json.loads(myResponse.content, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))
  y = [
      x
      for line in x 
      if line.ocSeries is not None
  ]


self.dispatcher = context.get_dispatcher()

self.dispatcher.emit("recorder-upcoming-event")



class GMT2(tzinfo):
  def utcoffset(self, dt):
      return timedelta(hours=2) + self.dst(dt)
  def dst(self, dt):
      d = datetime(dt.year, 4, 1)
      self.dston = d - timedelta(days=d.weekday() + 1)
      d = datetime(dt.year, 11, 1)
      self.dstoff = d - timedelta(days=d.weekday() + 1)
      if self.dston <=  dt.replace(tzinfo=None) < self.dstoff:
          return timedelta(hours=1)
      else:
          return timedelta(0)
  def tzname(self,dt):
      return "GMT +2"